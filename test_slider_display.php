<?php
require_once 'backend/inc/db.php';

echo "<h2>üîç Test Slider Display</h2>";
echo "<style>body{font-family:Arial;padding:20px;background:#f5f5f5;}</style>";

try {
    $pdo = getPDO();
    $today = date('Y-m-d');
    
    echo "<h3>Ng√†y hi·ªán t·∫°i: $today</h3>";
    
    // Test query gi·ªëng nh∆∞ trong slider.php
    $sql = "SELECT * FROM sliders 
            WHERE status = 1 
            AND (start_date IS NULL OR start_date <= ?) 
            AND (end_date IS NULL OR end_date >= ?) 
            ORDER BY display_order ASC, id ASC";
    
    $stmt = $pdo->prepare($sql);
    $stmt->execute([$today, $today]);
    $sliders = $stmt->fetchAll(PDO::FETCH_ASSOC);
    
    echo "<h3>K·∫øt qu·∫£: " . count($sliders) . " slider s·∫Ω hi·ªÉn th·ªã</h3>";
    
    if (empty($sliders)) {
        echo "<p style='color:red;font-weight:bold;'>‚ùå KH√îNG C√ì SLIDER N√ÄO!</p>";
        echo "<p>ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† slider s·∫Ω KH√îNG hi·ªÉn th·ªã tr√™n trang ch·ªß.</p>";
    } else {
        echo "<pre style='background:white;padding:20px;border-radius:8px;'>";
        print_r($sliders);
        echo "</pre>";
        
        echo "<h3>Preview Slider Code:</h3>";
        echo "<div style='background:#1e293b;color:#e2e8f0;padding:20px;border-radius:8px;'>";
        echo "<code>";
        foreach ($sliders as $index => $s) {
            echo "Slide " . ($index + 1) . ":<br>";
            echo "- Title: " . htmlspecialchars($s['title']) . "<br>";
            echo "- Image: " . htmlspecialchars($s['image']) . "<br>";
            echo "- Status: " . $s['status'] . "<br>";
            echo "- Display Order: " . $s['display_order'] . "<br><br>";
        }
        echo "</code>";
        echo "</div>";
    }
    
    echo "<hr><p><a href='index.php'>‚Üê Quay v·ªÅ trang ch·ªß</a> | <a href='backend/sliders.php'>Qu·∫£n l√Ω Slider ‚Üí</a></p>";
    
} catch (Exception $e) {
    echo "<p style='color:red;'>L·ªói: " . $e->getMessage() . "</p>";
}
?>

